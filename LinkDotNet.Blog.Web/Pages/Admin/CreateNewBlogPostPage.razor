@page "/create"
@attribute [Authorize]
@using LinkDotNet.Infrastructure.Persistence
@using LinkDotNet.Blog.Web.Shared.Admin
@using LinkDotNet.Domain
@inherits MarkdownComponentBase
@inject IBlogPostRepository blogPostRepository
@inject IToastService toastService

<div class="page">
    <CreateNewBlogPost Title="Create new BlogPost" OnBlogPostCreated="@(StoreBlogPostAsync)" ></CreateNewBlogPost>
</div>

@code {
    private async Task StoreBlogPostAsync(BlogPost blogPost)
    {
        await blogPostRepository.StoreAsync(blogPost);
        toastService.ShowInfo($"Created BlogPost {blogPost.Title}");
    }
}