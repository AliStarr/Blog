@page "/CreateNew"
@attribute [Authorize]
@using LinkDotNet.Infrastructure.Persistence
@using LinkDotNet.Blog.Web.Shared.Admin
@using LinkDotNet.Domain
@inherits MarkdownComponentBase
@inject IRepository _repository
@inject IToastService _toastService

<CreateNewBlogPost Title="Create new BlogPost" OnBlogPostCreated="@(blogPost => StoreBlogPostAsync(blogPost))" ></CreateNewBlogPost>

@code {
    private async Task StoreBlogPostAsync(BlogPost blogPost)
    {
        await _repository.StoreAsync(blogPost);
        _toastService.ShowInfo($"Created BlogPost {blogPost.Title}");
    }
}