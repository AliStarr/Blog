@page "/draft"
@using LinkDotNet.Blog.Domain
@using LinkDotNet.Blog.Infrastructure.Persistence
@attribute [Authorize]
@inject IRepository<BlogPost> blogPostRepository

<h3>Draft Blog Posts</h3>

<div class="content px-4">
    @for (var i = 0; i < blogPosts.Count; i++)
    {
        <ShortBlogPost BlogPost="blogPosts[i]" UseAlternativeStyle="@(i % 2 != 0)"></ShortBlogPost>
    }
</div>

@code {
    private IList<BlogPost> blogPosts = new List<BlogPost>();

    protected override async Task OnInitializedAsync()
    {
        blogPosts = (await blogPostRepository.GetAllAsync(p => !p.IsPublished, b => b.UpdatedDate)).ToList();
    }

}